up::
tags:: #state/seedling

# C++ 23

## \<expected\>
Similar a un optional. La clase contiene o no un valor y, al contrario que el optional, especifica por qué no contiene ese valor.

Se utiliza para hacer excepciones sin utilizar las excepciones como tal. 

```cpp
enum class parse_error {
...
}

std::expected<double, parse_error>
parse_number(std::string str) {

}
```

## \<optional\>
Puedes encadenar operaciones que devuelvan optionals con la función `and_then`.

```cpp
std::optional<float> a();
std::optional<float> b();
std::optional<float> c();

int main() {
	// and_then checkea si el valor devuelto es utilizado
	auto returned = a().and_then(&b).and_then(&c);
}
```

## string_view
std::string copia una cadena. Si no queremos copiar una cadena, porque solo queremos acceder a ella, usamos `string_view`. No permite modificaciones de la cadena, solo acceder a ella como consulta.

```cpp
std::string_view s = "mi cadena";
```

## span
El span es similar al string_view, excepto que en vez de ser un visualizador de strings, es un visualizador de estructuras

```cpp
std::vector numeritor = {1, 2, 3, 4, 5};
std::span<int> sn{numeritor.data(), numeritor.data()+3};
int a = sn[2];
```

También existe el mdspan, que te crea un visor multidimensional para una estructura

```cpp
std::vector v = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12};

auto ms2 = std::mdspan(v.data(), 2, 6);
auto ms3 = std::mdspan(v.data(), 2, 3, 2);

for(size_t i = 0; i != ms2.extent(0); i++) {
	for(size_t j = 0; j != ms2.extent(1); j++) {
		ms2[i,j] = i * j;
	}
}

for(size_t i = 0; i != ms3.extent(0); i++) {
	for(size_t j = 0; j != ms3.extent(1); j++) {
		for(size_t k = 0; k != ms3.extent(2); k++) {
		ms3[i,j,k] = i * j + k;
		}
	}
}
```

## map vs unordered_map vs flat_map

map = arbol binario ordenado
unordered_map = hashtable no ordenada, el más rápido y eficiente
flat_map = usa la búsqueda binaria, es mejor cuando hay pocas inserciones y removals o cuando son mapas pequeños (< 100 elementos)
## References

---
Planted: 2023-03-21
Last tended: 2023-03-21