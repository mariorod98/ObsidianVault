up::
tags:: #state/seedling

# Mobile 23-2-2023

## Usar AlamoFire para hacer HTTP Requests
1. Meter el SPM (Swift Package Manager) de Alamo Fire en las dependencias.
2. En nuestro viewModel, crear una function para cargar los datos de la API. La función se puede llamar viewDidLoad para llamarla desde viewDidLoad de la vista. 
3. Nos podemos hacer una extension privadadel view model llamada HeroDetailViewModel y que `ViewDidLoad` llame a esa función en privado`AF.request("dir API")` para hacer una request a la API.
```swift
// HeroDetailViewController
override func viewDidLoad() {
	...
	self.viewModel.viewDidLoad()
}
// HeroDetailViewModel
func viewDidLoad() {
	self.getHeroAPI()
}

private extension HeroDetailViewModel {
	func getHeroAPI {
		AF.request("dir API").response {response in
			debugPrint(response)
		}
	}
}

```

4. Definir el struct Hero como `Codable` para que el diccionario recibido en la HTTP request haga match.
```swift
// Hero
struct Hero : Codable {
   ...
}

// HeroDetailViewController
AF.request("dir API").responseDecodable(of: Hero.self) {response in
	debugPrint(response)
}
```

## References

---
Planted: 2023-02-23
Last tended: 2023-02-23